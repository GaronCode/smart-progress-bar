function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,n,t){return(n=s(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}function i(e,n){return function(e,n){if(n.get)return n.get.call(e);return n.value}(e,a(e,n,"get"))}function o(e,n,t){return function(e,n,t){if(n.set)n.set.call(e,t);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=t}}(e,a(e,n,"set"),t),t}function a(e,n,t){if(!n.has(e))throw new TypeError("attempted to "+t+" private field on non-instance");return n.get(e)}function d(e,n,t){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return t}function l(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,n,t){l(e,n),n.set(e,t)}function p(e,n){l(e,n),n.add(e)}var h={main:"dev-progress",mainSmall:"dev-progress-small",mainDone:"dev-progress-done",mainAnimationHidden:"dev-progress-before",mainAnimationHide:"dev-progress-before",container:"dev-progress__container",card:"dev-progress__card",cardProgress:"dev-progress__card-progress-color",percent:"dev-progress__percent",number:"dev-progress__percent-num",numberText:"dev-progress__percent-a",headerText:"dev-progress__card-text",liActive:"dev-progress-li-active",liHidden:"dev-progress-li-hidden"};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement(n);return e&&(r.className=e),t&&r.appendChild(document.createTextNode(t)),r}function g(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};e.classList.add(n),t&&setTimeout((function(){return e.classList.remove(n)}),0);var s=function(){s&&(e.removeEventListener("transitionend",s),t||e.classList.remove(n),s=null,r())};e.addEventListener("transitionend",s)}var u=new WeakMap,m=new WeakMap,f=new WeakSet,x=new WeakSet,_=new WeakSet,w=new WeakSet,y=new WeakSet,k=new WeakSet,b=new WeakSet,C=function(){function n(t){var s=t.context,i=t.name;e(this,n),p(this,b),p(this,k),p(this,y),p(this,w),p(this,_),p(this,x),p(this,f),c(this,u,{writable:!0,value:{}}),c(this,m,{writable:!0,value:1e3}),r(this,"_progress",0),r(this,"_name",void 0),this.context=s;var o=function(e){var n=v,t=n("","li"),r=n("","span",e.name),s=n("","span",e.progress);return t.appendChild(r),t.appendChild(s),t.addEventListener("click",(function(){e.onclick()})),{container:t,nameEl:r,progressEl:s}}(this),a=o.container,d=o.progressEl,l=o.nameEl;this.HtmlContainer=a,this.HtmlProgress=d,this.HtmlName=l,this.name=i,this.show()}return t(n,[{key:"onclick",value:function(){}},{key:"ondone",value:function(){}},{key:"progress",get:function(){return this._progress},set:function(e){d(this,_,E).call(this,e),100===e&&this.ondone()}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,this.HtmlName.innerText=e}},{key:"makeActive",value:function(){this.HtmlContainer.classList.add(h.liActive)}},{key:"removeActive",value:function(){this.HtmlContainer.classList.remove(h.liActive)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};g(this.HtmlContainer,h.liHidden,!1,e)}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};g(this.HtmlContainer,h.liHidden,!0,e)}}]),n}();function L(){return i(this,m)}function S(e){this.context.tryChangeProgress(this,e)}function E(e){if((e=parseInt(e))!==this.progress){var n=i(this,u);d(this,b,A).call(this,n),n.oldVal=n.oldVal?n.oldVal:0,this._progress=e,n.needVal=e,100!==e?d(this,k,P).call(this,n):d(this,y,H).call(this,n)}}function T(e){this.HtmlProgress.innerText=e+"%",d(this,x,S).call(this,e)}function H(e){var n=this,t=Math.ceil((100-e.oldVal)/8);e.timerId=setInterval((function(){e.oldVal+=t,e.needVal<=e.oldVal?(clearInterval(e.timerId),d(n,w,T).call(n,100),n.ondone()):d(n,w,T).call(n,Math.ceil(e.oldVal))}),80)}function P(e){var n=this,t=e.oldVal,r=e.needVal-t,s=d(this,f,L).call(this)/10,i=0;e.timerId=setInterval((function(){if(i!==s){var o=Math.ceil(t+r*function(e){var n=e*e;return n/(2*(n-e)+1)}(i++/s));e.oldVal=o,d(n,w,T).call(n,o)}else clearInterval(e.timerId)}),10)}function A(e){clearInterval(e.timerId)}var z=[],W=[];var I=".dev-progress\n{\n    z-index: 999999;\n    position:fixed;\n    display:flex;\n    width: 100vw;\n    height: 100vh;\n    justify-content: center;\n    align-items: center;\n    transition:0.5s;\n    top: 0;\n    left: 0;\n}\n.dev-progress .dev-progress__card\n{\n    padding-top: 20px;\n    position:relative;\n    width:250px;\n    background:#003a72;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    border-radius:20px;\n    text-align:center;\n    overflow:hidden;\n    transition: all 0.5s ease-out;\n}\n.dev-progress .dev-progress__card:hover\n{\n    transform:translateY(-10px);\n    box-shadow:0 15px 35px rgba(0,0,0,.5);\n}\n.dev-progress .dev-progress__card-progress-color\n{\n    content:'';\n    position:absolute;\n    top:0;\n    left:-50%;\n    width:100%;\n    height:100%;\n    background:rgba(255,255,255,.03);\n    pointer-events:none;\n    z-index:1;\n    transition: left .3s;\n}\n\n\n\n.dev-progress .dev-progress__container {\n    width: inherit;\n}\n\n\n.dev-progress  .dev-progress__percent\n{\n    position:relative;\n    width:150px;\n    height:150px;\n    border-radius:50%;\n    box-shadow: inset 0 0 50px #000;\n    background:#6fbcf0;\n    z-index:999;\n    transition: 0.5s;\n    margin: 0 auto;\n}\n.dev-progress  .dev-progress__percent  .dev-progress__percent-num\n{\n    position:absolute;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    border-radius:50%;\n}\n.dev-progress  .dev-progress__percent  .dev-progress__percent-num .dev-progress__percent-a\n{\n    color:#ececec;\n    font-weight:700;\n    font-size:40px;\n    transition:0.5s;\n    user-select: none;\n    cursor: inherit;\n}\n.dev-progress .dev-progress__card:hover  .dev-progress__percent  .dev-progress__percent-num .dev-progress__percent-a\n{\n    color:#fff;\n    font-size:60px;\n}\n.dev-progress  .dev-progress__percent  .dev-progress__percent-num span\n{\n    color:#ececec;\n    font-size:24px;\n    transition:0.5s;\n}\n.dev-progress .dev-progress__card:hover  .dev-progress__percent  .dev-progress__percent-num .dev-progress__percent-a span\n{\n    color:#fff;\n}\n.dev-progress .dev-progress__card-text\n{\n    position:relative;\n    color:#ececec;\n    margin-top:20px;\n    font-weight:700;\n    font-size:18px;\n    letter-spacing:1px;\n    text-transform:uppercase;\n    transition:0.5s;\n    overflow: hidden;\n}\n.dev-progress .dev-progress__card:hover .dev-progress__card-text\n{\n    color:#fff;\n}\n.dev-progress svg\n{\n    position:relative;\n    width:150px;\n    height:150px;\n    z-index:1000;\n}\n.dev-progress svg circle\n{\n    width:100%;\n    height:100%;\n    fill:none;\n    stroke:#82c6f3;\n    stroke-width:10;\n    stroke-linecap:round;\n    transform:translate(5px,5px);\n}\n.dev-progress svg circle:nth-child(2)\n{\n    stroke-dasharray:440;\n    stroke-dashoffset:440;\n}\n.dev-progress .dev-progress__card:nth-child(1) svg circle:nth-child(2)\n{\n    stroke-dashoffset:calc(440 - (440 * 90) / 100);\n    stroke:#c2c2c2;\n}\n\n\n.dev-progress-small {\n    top: 20px;\n    width: 220px;\n    height: 300px;\n}\n\n.dev-progress-small .dev-progress__card {\n    \n    width: 200px;\n    min-height: 200px;\n}\n\n.dev-progress-small .dev-progress__card-text {\n    font-size: xx-small;\n}\n\n.dev-progress-done .dev-progress__percent {\n    background: #6da462 !important;\n}\n\n.dev-progress-done .dev-progress__card {\n    background: #1a601e !important;\n}\n\n.dev-progress-hide .dev-progress__card\n{\n    transform:translateY(100px);\n    opacity: 0;\n}\n\n.dev-progress-before .dev-progress__card\n{\n    transform:translateY(100px);\n    opacity: 0;\n}\n\n\n\n.dev-progress ul {\n    color: #c2c2c2;\n    padding: 10px;\n    font-size: smaller;\n    list-style-type: none;\n    cursor: pointer;\n    user-select: none;\n}\n\n\n\n.dev-progress li {\n    display: flex;\n    text-transform: none;\n    gap: 5px;\n    transition: all .3s;\n    margin-bottom: 5px;\n}\n\n.dev-progress li.dev-progress-li-hidden {\n    font-size: 0;\n    opacity: .5;\n    padding: 0;\n    margin: 0;\n}\n\n.dev-progress li.dev-progress-li-active {\n    color: white;\n    text-shadow: 0px 0px 2px rgba(255, 255, 255, 0.3);\n}\n\n.dev-progress li:hover {\n    text-shadow: 0px 3px 4px rgb(0, 0, 0, .5);\n}\n\n\n.dev-progress li span:first-child {\n    flex-grow: 1;\n    overflow: hidden;\n    text-align: left;\n}";!function(e,n){if(e&&"undefined"!=typeof document){var t,r=!0===n.prepend?"prepend":"append",s=!0===n.singleTag,i="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(s){var o=z.indexOf(i);-1===o&&(o=z.push(i)-1,W[o]={}),t=W[o]&&W[o][r]?W[o][r]:W[o][r]=a()}else t=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),s=0;s<t.length;s++)e.setAttribute(t[s],n.attributes[t[s]]);var o="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}(I,{});var V=new WeakMap,j=new WeakMap,M=new WeakSet,O=new WeakSet,N=new WeakSet,D=new WeakSet,Y=new WeakSet,q=function(){function n(t){var s=t.whereSelector,a=void 0===s?"body":s,l=t.show,v=void 0===l||l,g=t.headerText,u=void 0===g?"Loading":g,m=t.minimize,f=void 0!==m&&m,x=t.changeSizeOnClick,_=void 0===x||x;e(this,n),p(this,Y),p(this,D),p(this,N),p(this,O),p(this,M),c(this,V,{writable:!0,value:void 0}),c(this,j,{writable:!0,value:{classes:h,mini:!1,activeProgress:null,progressList:[],texts:{headerText:""}}}),r(this,"_progress",0),o(this,V,document.querySelector(a)),i(this,j).texts.headerText=u,i(this,j).changeSizeOnClick=_,d(this,O,F).call(this),d(this,N,G).call(this),d(this,M,B).call(this),f&&this.minimize(),v&&this.show()}return t(n,[{key:"addProgress",value:function(e){var n=this,t=e.name,r=void 0===t?"element":t,s=e.progress,o=void 0===s?0:s,a=new C({context:this,name:r});return i(this,j).progressList.push(a),a.onclick=function(){n.makeProgressActive(a)},this.progressContainer.appendChild(a.HtmlContainer),a.progress=o,1===i(this,j).progressList.length&&this.makeProgressActive(a),a}},{key:"removeProgress",value:function(e){var n=this;i(this,j).progressList.splice(i(this,j).progressList.indexOf(e),1),i(this,j).activeProgress===e&&this.makeProgressActive(i(this,j).progressList[0]),e.hide((function(){n.progressContainer.removeChild(e.HtmlContainer)}))}},{key:"minimize",value:function(){i(this,j).mini?(this.main.classList.remove(i(this,j).classes.mainSmall),i(this,j).mini=!1):(this.main.classList.add(i(this,j).classes.mainSmall),i(this,j).mini=!0)}},{key:"progress",get:function(){return this._progress},set:function(e){100===e?this.main.classList.add(i(this,j).classes.mainDone):this.main.classList.remove(i(this,j).classes.mainDone),this._progress=e,this.progressLine.style.left=parseInt(-100+e)+"%",this.progressHtml.innerText=e}},{key:"tryChangeProgress",value:function(e,n){i(this,j).activeProgress===e&&(this.progress=n)}},{key:"makeProgressActive",value:function(e){void 0!==e?(i(this,j).activeProgress=e,i(this,j).progressList.forEach((function(n){n===e?n.makeActive():n.removeActive()})),this.progress=e.progress):this.progress=0}},{key:"show",value:function(){var e=this;this.isMounted||(this.main.classList.add(i(this,j).classes.mainAnimationHidden),d(this,D,J).call(this),setTimeout((function(){return e.main.classList.remove(i(e,j).classes.mainAnimationHidden)}),0))}},{key:"hide",value:function(){var e=this;if(this.isMounted){this.main.classList.add(i(this,j).classes.mainAnimationHide);this.main.addEventListener("transitionend",(function n(){d(e,Y,K).call(e),e.main.removeEventListener("transitionend",n),e.main.classList.remove(i(e,j).classes.mainAnimationHide)}))}}},{key:"isMounted",get:function(){return i(this,V)===this.main.parentElement}}]),n}();function B(){this.style=v(!1,"style",I)}function F(){var e=v,n=i(this,j).classes;this.main=e(n.main),this.card=e(n.card),this.progressLine=e(n.cardProgress);var t,r,s=e(n.container),o=e(n.percent),a=e("","svg"),d=(t=70,(r=document.createElement("circle")).cx=r.cy=r.r=t,r),l=e(n.number),c=e("","h5");this.progressHtml=e(n.numberText,"span","0");var p=e("","span","%");return this.header=e(n.headerText,"h5",i(this,j).texts.headerText),this.progressContainer=e("","ul"),this.main.appendChild(this.card),this.card.appendChild(s),this.card.appendChild(this.progressLine),s.appendChild(o),s.appendChild(this.header),s.appendChild(this.progressContainer),o.appendChild(a),o.appendChild(l),a.appendChild(d),l.appendChild(c),c.appendChild(this.progressHtml),c.appendChild(p),this.main}function G(){var e=this;this.progressContainer.addEventListener("click",(function(e){e.stopPropagation()})),i(this,j).changeSizeOnClick&&this.main.addEventListener("click",(function(){return e.minimize()}))}function J(){document.head.appendChild(this.style),i(this,V).appendChild(this.main)}function K(){document.head.removeChild(this.style),i(this,V).removeChild(this.main)}export{q as SmartProgressBar};
